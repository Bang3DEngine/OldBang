#ifndef WINDOWMAIN_H
#define WINDOWMAIN_H

#include <QApplication>

#include "Bang.h"

#include "Canvas.h"
#include "Logger.h"
#include <QMainWindow>

#ifdef BANG_EDITOR
#include "WindowMainAutoGenerated.h"

/**
 *  This will be a singleton shared amongst ALL *.o and *.so
 *  Cross-library shared singleton
 */
class QApplication;
class WindowMain : public Ui_WindowMain
{

private:
    WindowMain() : Ui_WindowMain() {}

    static WindowMain *s_p_win;

    QMainWindow *p_mainWindow = nullptr;
    QApplication *p_app = nullptr;

public:

    /**
     * @brief This must be called by main() in the mainBinary.
     * This method will register the WindowMain singleton into the
     * SingletonManager, for later use in shared libraries.
     * @return The created Singleton,
     */
    static void InitFromMainBinary(QMainWindow *window, QApplication *p_app);

    static WindowMain *GetInstance();
    static QMainWindow *GetMainWindow();
    QApplication *GetApplication() const;

};

#else // NOT defined BANG_EDITOR

class QApplication;
class WindowMain
{

private:
    WindowMain() {}

    static WindowMain *s_p_win;

    QMainWindow *p_mainWindow = nullptr;
    QApplication *p_app = nullptr;

public:

    Canvas *canvas = nullptr;

    /**
     * @brief This must be called by main() in the mainBinary.
     * This method will register the WindowMain singleton into the
     * SingletonManager, for later use in shared libraries.
     * @return The created Singleton,
     */
    static void InitFromMainBinary(QMainWindow *window, QApplication *p_app);

    static WindowMain *GetInstance();
    static QMainWindow *GetMainWindow();
    QApplication *GetApplication() const;

};

#endif // BANG_EDITOR

#endif // WINDOWMAIN_H
